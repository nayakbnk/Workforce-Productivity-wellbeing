<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Digital Footprint | MindEase AI</title>

  <!-- Google Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

  <style>
    :root {
      --primary: #6366f1;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --bg-primary: #0f172a;
      --bg-card: #1e293b;
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --font-sans: 'Inter', sans-serif;
      --font-display: 'Space Grotesk', sans-serif;
      --radius-md: 0.75rem;
      --radius-lg: 1rem;
    }

    body {
      font-family: var(--font-sans);
      background: var(--bg-primary);
      color: var(--text-primary);
      padding-top: 80px;
      margin: 0;
    }

    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
    }

    .nav-brand {
      font-family: var(--font-display);
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .nav-menu a {
      margin: 0 1rem;
      color: var(--text-secondary);
      text-decoration: none;
      transition: color 0.3s;
    }

    .nav-menu a.active, .nav-menu a:hover {
      color: var(--primary);
    }

    .page-header {
      padding: 3rem 2rem;
      text-align: center;
      background: linear-gradient(135deg, rgba(99,102,241,0.15), rgba(139,92,246,0.15));
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }

    .page-title {
      font-size: 2.5rem;
      font-family: var(--font-display);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
    }

    .container {
      max-width: 1400px;
      margin: auto;
      padding: 2rem;
    }

    .section {
      margin-bottom: 3rem;
    }

    .overview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(230px, 1fr));
      gap: 1.5rem;
    }

    .overview-card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.1);
      transition: transform 0.3s;
    }

    .overview-card:hover {
      transform: translateY(-4px);
    }

    .overview-icon {
      font-size: 1.8rem;
      margin-bottom: 0.75rem;
    }

    .overview-value {
      font-family: var(--font-display);
      font-size: 1.75rem;
      font-weight: 700;
    }

    .overview-label {
      font-size: 0.9rem;
      color: var(--text-secondary);
    }

    .chart-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
      gap: 2rem;
    }

    .chart-container {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .chart-title {
      font-size: 1.125rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .activity-timeline, .insights-section {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 1.5rem;
      border: 1px solid rgba(255,255,255,0.1);
      margin-top: 2rem;
    }

    .timeline-item {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      padding: 1rem 0;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }

    .timeline-time {
      font-weight: bold;
      color: var(--primary);
      min-width: 80px;
    }

    .timeline-content {
      flex: 1;
      padding-left: 1rem;
    }

    .timeline-badge {
      font-size: 0.75rem;
      padding: 0.25rem 0.75rem;
      border-radius: 1rem;
    }

    .healthy { background: rgba(16,185,129,0.2); color: var(--success); }
    .warning { background: rgba(245,158,11,0.2); color: var(--warning); }
    .critical { background: rgba(239,68,68,0.2); color: var(--danger); }

    .insight-card {
      margin-bottom: 1rem;
      padding: 1rem;
      border-left: 4px solid var(--primary);
      background: rgba(99,102,241,0.1);
      border-radius: var(--radius-md);
    }

    .insight-card.warning { border-left-color: var(--warning); }
    .insight-card.success { border-left-color: var(--success); }

    .insight-title { font-weight: 600; margin-bottom: 0.5rem; display: flex; gap: 0.5rem; align-items: center; }
    .insight-desc { font-size: 0.9rem; color: var(--text-secondary); }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="nav-brand"><i class="fas fa-brain"></i> MindEase<span style="color:#818cf8">AI</span></div>
    <div class="nav-menu">
      <a href="#" class="active">Digital Footprint</a>
      <a href="#">Analytics</a>
      <a href="#">Optimizer</a>
      <a href="#">Reports</a>
    </div>
  </nav>

  <header class="page-header">
    <h1 class="page-title"><i class="fas fa-fingerprint"></i> Digital Footprint Dashboard</h1>
    <p>AI-powered analysis of staff wellbeing through digital activity patterns.</p>
  </header>
  <!-- üß≠ Dashboard Banner with Login-Logout Timer -->
<section id="loginBanner" style="
  background: linear-gradient(135deg, rgba(99,102,241,0.2), rgba(6,182,212,0.2));
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 1rem;
  padding: 1.5rem 2rem;
  margin-bottom: 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1rem;
">
  <div>
    <h2 style="font-family: 'Space Grotesk', sans-serif; font-size: 1.75rem; margin-bottom: 0.25rem;">
      üë©‚Äç‚öïÔ∏è Staff Activity Tracker
    </h2>
    <p id="statusText" style="color: #cbd5e1;">Status: Not Logged In</p>
  </div>

  <div style="text-align: right;">
    <div id="timerDisplay" style="
      font-size: 2rem;
      font-weight: 700;
      font-family: 'Space Grotesk', sans-serif;
      color: #10b981;
      min-width: 120px;
    ">00:00:00</div>
    <button id="loginBtn" style="
      margin-top: 0.5rem;
      background-color: #6366f1;
      color: white;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: 0.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s;
    ">
      üïí Login
    </button>
  </div>
</section>

<script>
  let isLoggedIn = false;
  let startTime = null;
  let timerInterval = null;

  const loginBtn = document.getElementById("loginBtn");
  const timerDisplay = document.getElementById("timerDisplay");
  const statusText = document.getElementById("statusText");

  // üß† Format seconds ‚Üí HH:MM:SS
  const formatTime = (seconds) => {
    const h = String(Math.floor(seconds / 3600)).padStart(2, "0");
    const m = String(Math.floor((seconds % 3600) / 60)).padStart(2, "0");
    const s = String(seconds % 60).padStart(2, "0");
    return `${h}:${m}:${s}`;
  };

  // üü¢ Start Timer
  const startTimer = () => {
    startTime = Date.now();
    timerInterval = setInterval(() => {
      const elapsed = Math.floor((Date.now() - startTime) / 1000);
      timerDisplay.textContent = formatTime(elapsed);
    }, 1000);
  };

  // üî¥ Stop Timer
  const stopTimer = () => {
    clearInterval(timerInterval);
    timerInterval = null;
  };

  // üîÅ Toggle Login / Logout State
  loginBtn.addEventListener("click", () => {
    if (!isLoggedIn) {
      // Login action
      isLoggedIn = true;
      statusText.textContent = "Status: Logged In";
      statusText.style.color = "#10b981";
      loginBtn.textContent = "üö™ Logout";
      loginBtn.style.backgroundColor = "#ef4444";
      startTimer();
    } else {
      // Logout action
      isLoggedIn = false;
      statusText.textContent = "Status: Logged Out";
      statusText.style.color = "#f59e0b";
      loginBtn.textContent = "üïí Login";
      loginBtn.style.backgroundColor = "#6366f1";
      stopTimer();

      // Capture total session time
      const finalTime = timerDisplay.textContent;
      alert(`‚úÖ Session ended. Total active time: ${finalTime}`);

      // Optional: Reset the timer to zero after logout
      timerDisplay.textContent = "00:00:00";
    }
  });
</script>


  <div class="container">
    <section class="section">
      <h2>üë©‚Äç‚öïÔ∏è Employee Overview</h2>
      <div id="overviewGrid" class="overview-grid"></div>
    </section>

    <section class="section chart-grid">
      <div class="chart-container">
        <div class="chart-title"><i class="fas fa-chart-line"></i> Stress Trend (7 Days)</div>
        <canvas id="stressChart"></canvas>
      </div>

      <div class="chart-container">
        <div class="chart-title"><i class="fas fa-chart-pie"></i> Work vs Break Time</div>
        <canvas id="workBreakChart"></canvas>
      </div>
    </section>

    <div class="activity-timeline">
      <h3><i class="fas fa-clock"></i> Today's Activity Timeline</h3>
      <div id="timelineContainer"></div>
    </div>

    <div class="insights-section">
      <h3><i class="fas fa-lightbulb"></i> AI Insights & Recommendations</h3>
      <div id="insightsContainer"></div>
    </div>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  // =============================
  // üß† LOGIN - LOGOUT TIMER LOGIC
  // =============================
  let isLoggedIn = false;
  let startTime = null;
  let timerInterval = null;

  const loginBtn = document.getElementById("loginBtn");
  const timerDisplay = document.getElementById("timerDisplay");
  const statusText = document.getElementById("statusText");
  const overviewGrid = document.getElementById("overviewGrid");
  const timeline = document.getElementById("timelineContainer");

  // Initial employee data
  const employee = {
    name: 'Dr. Sarah Anderson',
    role: 'Emergency Doctor',
    department: 'Emergency Ward',
    loginTime: '--',
    logoutTime: '--',
    workingHours: '',
    restTime: 1.2,
    ward: 'ICU Block A',
    tasksCompleted: 84,
    breaksTaken: 2,
    patientsHandled: 40,
    errorRate: 4.5,
    stress: 0.78
  };

  // üß© Utility: Format seconds ‚Üí HH:MM:SS
  const formatTime = (seconds) => {
    const h = String(Math.floor(seconds / 3600)).padStart(2, "0");
    const m = String(Math.floor((seconds % 3600) / 60)).padStart(2, "0");
    const s = String(seconds % 60).padStart(2, "0");
    return `${h}:${m}:${s}`;
  };

  // üïí Format Clock Time
  const getCurrentTime = () => {
    const now = new Date();
    return now.toLocaleTimeString([], { hour12: false });
  };

  // üß± Render Employee Overview Cards
  function renderOverview() {
    overviewGrid.innerHTML = `
      <div class="overview-card">
        <div class="overview-icon"><i class="fas fa-sign-in-alt"></i></div>
        <div class="overview-value">${employee.loginTime}</div>
        <div class="overview-label">Login Time</div>
      </div>

      <div class="overview-card">
        <div class="overview-icon"><i class="fas fa-sign-out-alt"></i></div>
        <div class="overview-value">${employee.logoutTime}</div>
        <div class="overview-label">Logout Time</div>
      </div>

      <div class="overview-card">
        <div class="overview-icon"><i class="fas fa-clock"></i></div>
        <div class="overview-value">${employee.workingHours || '--'}</div>
        <div class="overview-label">Total Duty Hours</div>
      </div>

      <div class="overview-card">
        <div class="overview-icon"><i class="fas fa-bed"></i></div>
        <div class="overview-value">${employee.restTime}h</div>
        <div class="overview-label">Rest / Free Time</div>
      </div>

      <div class="overview-card">
        <div class="overview-icon"><i class="fas fa-hospital-symbol"></i></div>
        <div class="overview-value">${employee.department}</div>
        <div class="overview-label">Department</div>
      </div>

      <div class="overview-card">
        <div class="overview-icon"><i class="fas fa-heart-pulse"></i></div>
        <div class="overview-value">${(employee.stress * 100).toFixed(0)}%</div>
        <div class="overview-label">Stress Level</div>
      </div>
    `;
  }

  // üïì Render Activity Timeline (Live Updating)
  function renderTimeline() {
    const events = [];

    if (employee.loginTime !== '--') {
      events.push({
        time: employee.loginTime,
        title: 'Login',
        desc: 'Started shift in Emergency ward',
        badge: 'healthy'
      });
    }

    if (employee.workingHours) {
      events.push({
        time: '‚è± ' + employee.workingHours,
        title: 'Active Session',
        desc: 'Currently logged in ‚Äî time being tracked live',
        badge: 'warning'
      });
    }

    if (employee.logoutTime !== '--') {
      events.push({
        time: employee.logoutTime,
        title: 'Logout',
        desc: 'Shift completed successfully',
        badge: 'healthy'
      });
    }

    timeline.innerHTML = events.length
      ? events.map(ev => `
        <div class="timeline-item">
          <div class="timeline-time">${ev.time}</div>
          <div class="timeline-content">
            <div class="timeline-title">${ev.title}</div>
            <div class="timeline-desc">${ev.desc}</div>
          </div>
          <span class="timeline-badge ${ev.badge}">${ev.badge.toUpperCase()}</span>
        </div>
      `).join('')
      : `<p style="opacity:0.8;">No activity recorded yet.</p>`;
  }

  // Initial render
  renderOverview();
  renderTimeline();

  // üü¢ Start Timer
  const startTimer = () => {
    startTime = new Date();
    employee.loginTime = getCurrentTime();
    renderOverview();
    renderTimeline();

    timerInterval = setInterval(() => {
      const elapsed = Math.floor((Date.now() - startTime.getTime()) / 1000);
      timerDisplay.textContent = formatTime(elapsed);

      // Update working hours live every few seconds
      employee.workingHours = (elapsed / 3600).toFixed(2) + "h";
      renderOverview();
      renderTimeline();
    }, 1000);
  };

  // üî¥ Stop Timer
  const stopTimer = () => {
    clearInterval(timerInterval);
    timerInterval = null;
  };

  // üîÅ Login / Logout Toggle
  loginBtn.addEventListener("click", () => {
    if (!isLoggedIn) {
      // LOGIN
      isLoggedIn = true;
      statusText.textContent = "Status: Logged In";
      statusText.style.color = "#10b981";
      loginBtn.textContent = "üö™ Logout";
      loginBtn.style.backgroundColor = "#ef4444";
      startTimer();
    } else {
      // LOGOUT
      isLoggedIn = false;
      statusText.textContent = "Status: Logged Out";
      statusText.style.color = "#f59e0b";
      loginBtn.textContent = "üïí Login";
      loginBtn.style.backgroundColor = "#6366f1";

      stopTimer();

      // Capture logout and duration
      employee.logoutTime = getCurrentTime();
      const durationSeconds = Math.floor((new Date() - startTime) / 1000);
      const hours = (durationSeconds / 3600).toFixed(2);
      employee.workingHours = `${hours}h`;
      renderOverview();
      renderTimeline();

      alert(`‚úÖ Session Ended\nLogin: ${employee.loginTime}\nLogout: ${employee.logoutTime}\nTotal Duty Hours: ${hours}h`);
      timerDisplay.textContent = "00:00:00";
    }
  });

  // =============================
  // üìä CHARTS
  // =============================
  const stressCtx = document.getElementById('stressChart');
  if (stressCtx) {
    new Chart(stressCtx, {
      type: 'line',
      data: {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [{
          label: 'Stress %',
          data: [70, 74, 72, 78, 81, 79, 77],
          borderColor: '#6366f1',
          backgroundColor: 'rgba(99,102,241,0.1)',
          tension: 0.4,
          fill: true
        }]
      },
      options: { plugins: { legend: { display: false } }, scales: { y: { max: 100, beginAtZero: true } } }
    });
  }

  const wbCtx = document.getElementById('workBreakChart');
  if (wbCtx) {
    new Chart(wbCtx, {
      type: 'doughnut',
      data: {
        labels: ['Active Work', 'Break', 'Idle Time'],
        datasets: [{
          data: [8.5, 1.0, 0.5],
          backgroundColor: ['#6366f1', '#10b981', '#94a3b8']
        }]
      },
      options: { plugins: { legend: { position: 'bottom' } } }
    });
  }

  // =============================
  // üí° AI INSIGHTS
  // =============================
  const insights = document.getElementById('insightsContainer');
  const insightList = [
    { type: 'warning', icon: 'fa-exclamation-triangle', title: 'High Stress Level', desc: 'Detected sustained stress above 75%. Recommend shorter shifts or peer rotation.' },
    { type: 'warning', icon: 'fa-clock', title: 'Extended Duty Hours', desc: 'Duty exceeds safe limit of 8h. Suggest early logout tomorrow.' },
    { type: 'success', icon: 'fa-check-circle', title: 'Good Rest Pattern', desc: 'Rest time recorded: 1.2h. Maintain at least 1h rest every 4h shift.' },
    { type: 'warning', icon: 'fa-bug', title: 'EHR Error Spike', desc: 'Error rate 4.5% indicates mild fatigue. Consider system alerts review.' }
  ];

  if (insights) {
    insights.innerHTML = insightList.map(ins => `
      <div class="insight-card ${ins.type}">
        <div class="insight-title"><i class="fas ${ins.icon}"></i> ${ins.title}</div>
        <div class="insight-desc">${ins.desc}</div>
      </div>
    `).join('');
  }

});
</script>


</body>
</html>
